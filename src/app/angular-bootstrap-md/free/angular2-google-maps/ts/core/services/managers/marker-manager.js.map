{"version":3,"sources":["../../../../../../../../src/app/typescripts/free/angular2-google-maps/ts/core/services/managers/marker-manager.ts"],"names":[],"mappings":"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","file":"marker-manager.js","sourceRoot":"","sourcesContent":["import {Injectable, NgZone} from '@angular/core';\r\nimport {Observable} from 'rxjs/Observable';\r\nimport {Observer} from 'rxjs/Observer';\r\n\r\nimport {SebmGoogleMapMarker} from './../../directives/google-map-marker';\r\n\r\nimport {GoogleMapsAPIWrapper} from './../google-maps-api-wrapper';\r\nimport {Marker} from './../google-maps-types';\r\n\r\n\r\nexport class MarkerManager {\r\n  private _markers: Map<SebmGoogleMapMarker, Promise<Marker>> =\r\n      new Map<SebmGoogleMapMarker, Promise<Marker>>();\r\n\r\n  constructor(private _mapsWrapper: GoogleMapsAPIWrapper, private _zone: NgZone) {}\r\n\r\n  deleteMarker(marker: SebmGoogleMapMarker): Promise<void> {\r\n    const m = this._markers.get(marker);\r\n    if (m == null) {\r\n      // marker already deleted\r\n      return Promise.resolve();\r\n    }\r\n    return m.then((m: Marker) => {\r\n      return this._zone.run(() => {\r\n        m.setMap(null);\r\n        this._markers.delete(marker);\r\n      });\r\n    });\r\n  }\r\n\r\n  updateMarkerPosition(marker: SebmGoogleMapMarker): Promise<void> {\r\n    return this._markers.get(marker).then(\r\n        (m: Marker) => m.setPosition({lat: marker.latitude, lng: marker.longitude}));\r\n  }\r\n\r\n  updateTitle(marker: SebmGoogleMapMarker): Promise<void> {\r\n    return this._markers.get(marker).then((m: Marker) => m.setTitle(marker.title));\r\n  }\r\n\r\n  updateLabel(marker: SebmGoogleMapMarker): Promise<void> {\r\n    return this._markers.get(marker).then((m: Marker) => { m.setLabel(marker.label); });\r\n  }\r\n\r\n  updateDraggable(marker: SebmGoogleMapMarker): Promise<void> {\r\n    return this._markers.get(marker).then((m: Marker) => m.setDraggable(marker.draggable));\r\n  }\r\n\r\n  updateIcon(marker: SebmGoogleMapMarker): Promise<void> {\r\n    return this._markers.get(marker).then((m: Marker) => m.setIcon(marker.iconUrl));\r\n  }\r\n\r\n  updateOpacity(marker: SebmGoogleMapMarker): Promise<void> {\r\n    return this._markers.get(marker).then((m: Marker) => m.setOpacity(marker.opacity));\r\n  }\r\n\r\n  updateVisible(marker: SebmGoogleMapMarker): Promise<void> {\r\n    return this._markers.get(marker).then((m: Marker) => m.setVisible(marker.visible));\r\n  }\r\n\r\n  updateZIndex(marker: SebmGoogleMapMarker): Promise<void> {\r\n    return this._markers.get(marker).then((m: Marker) => m.setZIndex(marker.zIndex));\r\n  }\r\n\r\n  addMarker(marker: SebmGoogleMapMarker) {\r\n    const markerPromise = this._mapsWrapper.createMarker({\r\n      position: {lat: marker.latitude, lng: marker.longitude},\r\n      label: marker.label,\r\n      draggable: marker.draggable,\r\n      icon: marker.iconUrl,\r\n      opacity: marker.opacity,\r\n      visible: marker.visible,\r\n      zIndex: marker.zIndex,\r\n      title: marker.title\r\n    });\r\n    this._markers.set(marker, markerPromise);\r\n  }\r\n\r\n  getNativeMarker(marker: SebmGoogleMapMarker): Promise<Marker> {\r\n    return this._markers.get(marker);\r\n  }\r\n\r\n  createEventObservable<T>(eventName: string, marker: SebmGoogleMapMarker): Observable<T> {\r\n    return Observable.create((observer: Observer<T>) => {\r\n      this._markers.get(marker).then((m: Marker) => {\r\n        m.addListener(eventName, (e: T) => this._zone.run(() => observer.next(e)));\r\n      });\r\n    });\r\n  }\r\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: GoogleMapsAPIWrapper, },\n{type: NgZone, },\n];\n}\r\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}