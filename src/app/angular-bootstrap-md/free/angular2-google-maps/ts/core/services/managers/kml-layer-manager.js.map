{"version":3,"sources":["../../../../../../../../src/app/typescripts/free/angular2-google-maps/ts/core/services/managers/kml-layer-manager.ts"],"names":[],"mappings":"AAAA,OAAO,EAAA,UAAE,EAAW,MAAA,EAAO,MAAM,eAAA,CAAgB;AACjD,OAAO,EAAA,UAAE,EAAU,MAAM,iBAAA,CAAkB;AAI3C,OAAO,EAAA,oBAAE,EAAoB,MAAM,8BAAA,CAA+B;AAKlE;;GAEG;AAEH;IAIE,yBAAoB,QAA8B,EAAU,KAAa;QAArD,aAAQ,GAAR,QAAQ,CAAsB;QAAU,UAAK,GAAL,KAAK,CAAQ;QAHjE,YAAO,GACX,IAAI,GAAG,EAA4C,CAAC;IAEoB,CAAC;IAE7E;;OAEG;IACH,qCAAW,GAAX,UAAY,KAA4B;QACtC,IAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC,UAAA,CAAC;YAClD,MAAM,CAAC,IAAI,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAkB;gBAC/C,SAAS,EAAE,KAAK,CAAC,SAAS;gBAC1B,GAAG,EAAE,CAAC;gBACN,gBAAgB,EAAE,KAAK,CAAC,gBAAgB;gBACxC,cAAc,EAAE,KAAK,CAAC,cAAc;gBACpC,mBAAmB,EAAE,KAAK,CAAC,mBAAmB;gBAC9C,GAAG,EAAE,KAAK,CAAC,GAAG;gBACd,MAAM,EAAE,KAAK,CAAC,MAAM;aACrB,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;IACpC,CAAC;IAED,oCAAU,GAAV,UAAW,KAA4B,EAAE,OAAwB;QAC/D,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,UAAU,CAAC,OAAO,CAAC,EAArB,CAAqB,CAAC,CAAC;IAC3D,CAAC;IAED,wCAAc,GAAd,UAAe,KAA4B;QAA3C,iBAKC;QAJC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,UAAA,CAAC;YAC5B,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;YACf,KAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QAC7B,CAAC,CAAC,CAAC;IACL,CAAC;IAED;;OAEG;IACH,+CAAqB,GAArB,UAAyB,SAAiB,EAAE,KAA4B;QAAxE,iBAMC;QALC,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,UAAC,QAAqB;YAC7C,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,UAAC,CAAW;gBACvC,CAAC,CAAC,WAAW,CAAC,SAAS,EAAE,UAAC,CAAI,IAAK,OAAA,KAAI,CAAC,KAAK,CAAC,GAAG,CAAC,cAAM,OAAA,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,EAAhB,CAAgB,CAAC,EAAtC,CAAsC,CAAC,CAAC;YAC7E,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC;IASH,sBAAC;AAAD,CArDA,AAqDC;;AARM,0BAAU,GAA0B;IAC3C,EAAE,IAAI,EAAE,UAAU,EAAE;CACnB,CAAC;AACF,kBAAkB;AACX,8BAAc,GAAmE,cAAM,OAAA;IAC9F,EAAC,IAAI,EAAE,oBAAoB,GAAG;IAC9B,EAAC,IAAI,EAAE,MAAM,GAAG;CACf,EAH6F,CAG7F,CAAC","file":"kml-layer-manager.js","sourceRoot":"","sourcesContent":["import {Injectable, NgZone} from '@angular/core';\r\nimport {Observable} from 'rxjs/Observable';\r\nimport {Observer} from 'rxjs/Observer';\r\n\r\nimport {SebmGoogleMapKmlLayer} from './../../directives/google-map-kml-layer';\r\nimport {GoogleMapsAPIWrapper} from './../google-maps-api-wrapper';\r\nimport {KmlLayer, KmlLayerOptions} from './../google-maps-types';\r\n\r\ndeclare var google: any;\r\n\r\n/**\r\n * Manages all KML Layers for a Google Map instance.\r\n */\r\n\r\nexport class KmlLayerManager {\r\n  private _layers: Map<SebmGoogleMapKmlLayer, Promise<KmlLayer>> =\r\n      new Map<SebmGoogleMapKmlLayer, Promise<KmlLayer>>();\r\n\r\n  constructor(private _wrapper: GoogleMapsAPIWrapper, private _zone: NgZone) {}\r\n\r\n  /**\r\n   * Adds a new KML Layer to the map.\r\n   */\r\n  addKmlLayer(layer: SebmGoogleMapKmlLayer) {\r\n    const newLayer = this._wrapper.getNativeMap().then(m => {\r\n      return new google.maps.KmlLayer(<KmlLayerOptions>{\r\n        clickable: layer.clickable,\r\n        map: m,\r\n        preserveViewport: layer.preserveViewport,\r\n        screenOverlays: layer.screenOverlays,\r\n        suppressInfoWindows: layer.suppressInfoWindows,\r\n        url: layer.url,\r\n        zIndex: layer.zIndex\r\n      });\r\n    });\r\n    this._layers.set(layer, newLayer);\r\n  }\r\n\r\n  setOptions(layer: SebmGoogleMapKmlLayer, options: KmlLayerOptions) {\r\n    this._layers.get(layer).then(l => l.setOptions(options));\r\n  }\r\n\r\n  deleteKmlLayer(layer: SebmGoogleMapKmlLayer) {\r\n    this._layers.get(layer).then(l => {\r\n      l.setMap(null);\r\n      this._layers.delete(layer);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Creates a Google Maps event listener for the given KmlLayer as an Observable\r\n   */\r\n  createEventObservable<T>(eventName: string, layer: SebmGoogleMapKmlLayer): Observable<T> {\r\n    return Observable.create((observer: Observer<T>) => {\r\n      this._layers.get(layer).then((m: KmlLayer) => {\r\n        m.addListener(eventName, (e: T) => this._zone.run(() => observer.next(e)));\r\n      });\r\n    });\r\n  }\r\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: GoogleMapsAPIWrapper, },\n{type: NgZone, },\n];\n}\r\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}