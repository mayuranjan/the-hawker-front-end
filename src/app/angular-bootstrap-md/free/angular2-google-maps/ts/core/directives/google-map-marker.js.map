{"version":3,"sources":["../../../../../../../src/app/typescripts/free/angular2-google-maps/ts/core/directives/google-map-marker.ts"],"names":[],"mappings":"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","file":"google-map-marker.js","sourceRoot":"","sourcesContent":["import {AfterContentInit, ContentChild, Directive, EventEmitter, OnChanges, OnDestroy, SimpleChange} from '@angular/core';\r\nimport {Subscription} from 'rxjs/Subscription';\r\n\r\nimport {MouseEvent} from '../map-types';\r\nimport * as mapTypes from '../services/google-maps-types';\r\nimport {MarkerManager} from '../services/managers/marker-manager';\r\n\r\nimport {SebmGoogleMapInfoWindow} from './google-map-info-window';\r\n\r\nlet markerId = 0;\r\n\r\n/**\r\n * SebmGoogleMapMarker renders a map marker inside a {@link SebmGoogleMap}.\r\n *\r\n * ### Example\r\n * ```typescript\r\n * import { Component } from 'angular2/core';\r\n * import { SebmGoogleMap, SebmGoogleMapMarker } from 'angular2-google-maps/core';\r\n *\r\n * @Component({\r\n *  selector: 'my-map-cmp',\r\n *  directives: [SebmGoogleMap, SebmGoogleMapMarker],\r\n *  styles: [`\r\n *    .sebm-google-map-container {\r\n *      height: 300px;\r\n *    }\r\n * `],\r\n *  template: `\r\n *    <sebm-google-map [latitude]=\"lat\" [longitude]=\"lng\" [zoom]=\"zoom\">\r\n *      <sebm-google-map-marker [latitude]=\"lat\" [longitude]=\"lng\" [label]=\"'M'\">\r\n *      </sebm-google-map-marker>\r\n *    </sebm-google-map>\r\n *  `\r\n * })\r\n * ```\r\n */\r\n\r\nexport class SebmGoogleMapMarker implements OnDestroy, OnChanges, AfterContentInit {\r\n  /**\r\n   * The latitude position of the marker.\r\n   */\r\n  latitude: number;\r\n\r\n  /**\r\n   * The longitude position of the marker.\r\n   */\r\n  longitude: number;\r\n\r\n  /**\r\n   * The title of the marker.\r\n   */\r\n  title: string;\r\n\r\n  /**\r\n   * The label (a single uppercase character) for the marker.\r\n   */\r\n  label: string;\r\n\r\n  /**\r\n   * If true, the marker can be dragged. Default value is false.\r\n   */\r\n  draggable: boolean = false;\r\n\r\n  /**\r\n   * Icon (the URL of the image) for the foreground.\r\n   */\r\n  iconUrl: string;\r\n\r\n  /**\r\n   * If true, the marker is visible\r\n   */\r\n  visible: boolean = true;\r\n\r\n  /**\r\n   * Whether to automatically open the child info window when the marker is clicked.\r\n   */\r\n  openInfoWindow: boolean = true;\r\n\r\n  /**\r\n   * The marker's opacity between 0.0 and 1.0.\r\n   */\r\n  opacity: number = 1;\r\n\r\n  /**\r\n   * All markers are displayed on the map in order of their zIndex, with higher values displaying in\r\n   * front of markers with lower values. By default, markers are displayed according to their\r\n   * vertical position on screen, with lower markers appearing in front of markers further up the\r\n   * screen.\r\n   */\r\n  zIndex: number = 1;\r\n\r\n  /**\r\n   * This event emitter gets emitted when the user clicks on the marker.\r\n   */\r\n  markerClick: EventEmitter<void> = new EventEmitter<void>();\r\n\r\n  /**\r\n   * This event is fired when the user stops dragging the marker.\r\n   */\r\n  dragEnd: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event is fired when the user mouses over the marker.\r\n   */\r\n  mouseOver: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event is fired when the user mouses outside the marker.\r\n   */\r\n  mouseOut: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n   infoWindow: SebmGoogleMapInfoWindow;\r\n\r\n  private _markerAddedToManger: boolean = false;\r\n  private _id: string;\r\n  private _observableSubscriptions: Subscription[] = [];\r\n\r\n  constructor(private _markerManager: MarkerManager) { this._id = (markerId++).toString(); }\r\n\r\n  ngAfterContentInit() {\r\n    if (this.infoWindow != null) {\r\n      this.infoWindow.hostMarker = this;\r\n    }\r\n  }\r\n\r\n  ngOnChanges(changes: {[key: string]: SimpleChange}) {\r\n    if (typeof this.latitude !== 'number' || typeof this.longitude !== 'number') {\r\n      return;\r\n    }\r\n    if (!this._markerAddedToManger) {\r\n      this._markerManager.addMarker(this);\r\n      this._markerAddedToManger = true;\r\n      this._addEventListeners();\r\n      return;\r\n    }\r\n    if (changes['latitude'] || changes['longitude']) {\r\n      this._markerManager.updateMarkerPosition(this);\r\n    }\r\n    if (changes['title']) {\r\n      this._markerManager.updateTitle(this);\r\n    }\r\n    if (changes['label']) {\r\n      this._markerManager.updateLabel(this);\r\n    }\r\n    if (changes['draggable']) {\r\n      this._markerManager.updateDraggable(this);\r\n    }\r\n    if (changes['iconUrl']) {\r\n      this._markerManager.updateIcon(this);\r\n    }\r\n    if (changes['opacity']) {\r\n      this._markerManager.updateOpacity(this);\r\n    }\r\n    if (changes['visible']) {\r\n      this._markerManager.updateVisible(this);\r\n    }\r\n    if (changes['zIndex']) {\r\n      this._markerManager.updateZIndex(this);\r\n    }\r\n  }\r\n\r\n  private _addEventListeners() {\r\n    const cs = this._markerManager.createEventObservable('click', this).subscribe(() => {\r\n      if (this.openInfoWindow && this.infoWindow != null) {\r\n        this.infoWindow.open();\r\n      }\r\n      this.markerClick.emit(null);\r\n    });\r\n    this._observableSubscriptions.push(cs);\r\n\r\n    const ds =\r\n        this._markerManager.createEventObservable<mapTypes.MouseEvent>('dragend', this)\r\n            .subscribe((e: mapTypes.MouseEvent) => {\r\n              this.dragEnd.emit(<MouseEvent>{coords: {lat: e.latLng.lat(), lng: e.latLng.lng()}});\r\n            });\r\n    this._observableSubscriptions.push(ds);\r\n\r\n    const mover =\r\n        this._markerManager.createEventObservable<mapTypes.MouseEvent>('mouseover', this)\r\n            .subscribe((e: mapTypes.MouseEvent) => {\r\n              this.mouseOver.emit(<MouseEvent>{coords: {lat: e.latLng.lat(), lng: e.latLng.lng()}});\r\n            });\r\n    this._observableSubscriptions.push(mover);\r\n\r\n    const mout =\r\n        this._markerManager.createEventObservable<mapTypes.MouseEvent>('mouseout', this)\r\n            .subscribe((e: mapTypes.MouseEvent) => {\r\n              this.mouseOut.emit(<MouseEvent>{coords: {lat: e.latLng.lat(), lng: e.latLng.lng()}});\r\n            });\r\n    this._observableSubscriptions.push(mout);\r\n  }\r\n\r\n  id(): string { return this._id; }\r\n\r\n  toString(): string { return 'SebmGoogleMapMarker-' + this._id.toString(); }\r\n\r\n  ngOnDestroy() {\r\n    this._markerManager.deleteMarker(this);\r\n    // unsubscribe all registered observable subscriptions\r\n    this._observableSubscriptions.forEach((s) => s.unsubscribe());\r\n  }\r\nstatic decorators: DecoratorInvocation[] = [\n{ type: Directive, args: [{\r\n  selector: 'sebm-google-map-marker',\r\n  inputs: [\r\n    'latitude', 'longitude', 'title', 'label', 'draggable: markerDraggable', 'iconUrl',\r\n    'openInfoWindow', 'opacity', 'visible', 'zIndex'\r\n  ],\r\n  outputs: ['markerClick', 'dragEnd', 'mouseOver', 'mouseOut']\r\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: MarkerManager, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'infoWindow': [{ type: ContentChild, args: [SebmGoogleMapInfoWindow, ] },],\n};\n}\r\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}