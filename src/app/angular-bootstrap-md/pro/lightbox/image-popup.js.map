{"version":3,"sources":["../../../../src/app/typescripts/pro/lightbox/image-popup.ts"],"names":[],"mappings":"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","file":"image-popup.js","sourceRoot":"","sourcesContent":["import {Component, Input,Output,ElementRef,EventEmitter,OnInit,HostListener,trigger, state, style, transition, animate, keyframes } from '@angular/core';\r\nimport { zoomState, restartState } from '../../pro/animations/animations';\r\n\r\ndeclare var screenfull: any;\r\n\r\nimport 'hammerjs';\r\n\r\n\r\n\r\nexport class ImageModal implements OnInit {\r\n   public _element:any;\r\n   public opened:boolean = false;\r\n   public imgSrc:string;\r\n   public currentImageIndex:number;\r\n   public loading:boolean= false;\r\n   public showRepeat:boolean= false;\r\n   public isMobile:boolean = false;\r\n\r\n   public openModalWindow: any;\r\n\r\n   public modalImages:any;\r\n   public imagePointer:number;\r\n\r\n   public fullscreen: boolean;\r\n   public zoom: boolean;\r\n   public smooth: boolean = true;\r\n   public type: String;\r\n\r\n   cancelEvent = new EventEmitter<any>();\r\n  constructor(public element: ElementRef) {\r\n    this._element = this.element.nativeElement;\r\n    try {\r\n      document.createEvent(\"TouchEvent\");\r\n      this.isMobile = true;\r\n    } catch(err) {\r\n      this.isMobile = false;\r\n      return;\r\n    }\r\n  }\r\n\r\n  zoomed: string = 'inactive';\r\n  \r\n  toggleZoomed() {\r\n    this.zoomed = (this.zoomed == 'inactive') ? 'active' : 'inactive';\r\n    this.zoom = !this.zoom;\r\n  }\r\n\r\n\r\n  toggleRestart() {\r\n    this.zoomed = (this.zoomed == 'inactive') ? 'active' : 'inactive';\r\n  }\r\n\r\n\r\n  ngOnInit() {\r\n      this.loading = true;\r\n      if(this.imagePointer >= 0) {\r\n      this.showRepeat = false;\r\n      this.openGallery(this.imagePointer);\r\n    } else {\r\n      this.showRepeat = true;\r\n    }\r\n  }\r\n  closeGallery() {\r\n    this.smooth = false;\r\n    this.zoom = false;\r\n    if(screenfull.enabled) {\r\n       screenfull.exit();\r\n    }\r\n    this.opened = false;\r\n    this.cancelEvent.emit(null);\r\n  }\r\n  prevImage() {\r\n    // this.smooth = false;\r\n    // this.zoom = false;\r\n    this.loading = true;\r\n    this.currentImageIndex--;\r\n    if(this.currentImageIndex < 0) {\r\n      this.currentImageIndex = this.modalImages.length-1  ;\r\n    }\r\n    this.openGallery(this.currentImageIndex);\r\n  }\r\n  nextImage() {\r\n    // this.smooth = false;\r\n    // this.zoom = false;\r\n    this.loading = true;\r\n    this.currentImageIndex++;\r\n    if(this.modalImages.length === this.currentImageIndex) {\r\n      this.currentImageIndex = 0;\r\n    }\r\n    this.openGallery(this.currentImageIndex);\r\n\r\n  }\r\n  openGallery(index: any) {\r\n    if(!index) {\r\n    this.currentImageIndex = 1;\r\n    }\r\n    this.currentImageIndex = index;\r\n      this.opened = true;\r\n     for (var i = 0; i < this.modalImages.length; i++) {\r\n            if (i === this.currentImageIndex ) {\r\n              this.imgSrc = this.modalImages[i].img;\r\n              this.loading = false;\r\n              break;\r\n            }\r\n       }  \r\n  }\r\n\r\n  fullScreen(): any {\r\n    if (screenfull.enabled) {\r\n\t\t\tscreenfull.toggle();\r\n\t\t}\r\n  }\r\n\r\n  get is_iPhone_or_iPod(){\r\n    if (navigator && navigator.userAgent && navigator.userAgent != null) {\r\n        var strUserAgent = navigator.userAgent.toLowerCase();\r\n        var arrMatches = strUserAgent.match(/ipad/);\r\n        if (arrMatches != null) \r\n             return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  keyboardControl(event: KeyboardEvent) {\r\n    if(event.keyCode == 39) {\r\n      this.nextImage();\r\n    }\r\n    if(event.keyCode == 37) {\r\n      this.prevImage();\r\n    }\r\n  }\r\n\r\n  // protected mouseX;\r\n  // protected mouseY; \r\n\r\n  // checkEvent(event) {\r\n  //   this.mouseX = event.clientX;\r\n  //   this.mouseY = event.clientY;\r\n  // }\r\n \r\n  // setZoom(event) {\r\n  //   if(event.type === 'click') {\r\n  //     if(this.zoom) {\r\n  //       this.smooth = true;\r\n  //       this.zoom = false;\r\n  //     } else {\r\n  //       this.smooth = true;\r\n  //       this.zoom = true;\r\n  \r\n  //     }\r\n  //   }\r\n\r\n  //   if(this.mouseX == event.clientX && this.mouseY == event.clientY) {\r\n  //     if(this.zoom) {\r\n  //       this.smooth = true;\r\n  //       this.zoom = false;\r\n  //     } else {\r\n  //       this.smooth = true;\r\n  //       this.zoom = true;\r\n  \r\n  //     }\r\n  //   }\r\n  // }\r\n\r\n  SWIPE_ACTION = { LEFT: 'swipeleft', RIGHT: 'swiperight'};\r\n\r\n   swipe(event: any, action: String = this.SWIPE_ACTION.RIGHT) {\r\n        // let thisImg = this._element.querySelector('.ng-gallery-content').querySelector('img[src=\"' + this.imgSrc + '\"]');\r\n\r\n        if (action == this.SWIPE_ACTION.RIGHT) {\r\n            this.nextImage();\r\n            // console.log(event.distance, this.modalImages);\r\n        }\r\n\r\n        // previous\r\n        if (action === this.SWIPE_ACTION.LEFT) {\r\n           this.prevImage();\r\n        }\r\n\r\n    }\r\n\r\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\r\n  selector: 'ImageModal',\r\n  animations: [zoomState, restartState] ,\r\n  template: `\r\n    <div class=\"ng-gallery mdb-lightbox {{ type }}\" *ngIf=\"showRepeat\"> \r\n      <figure class=\"col-md-4\" *ngFor =\"let i of modalImages; let index = index\">\r\n        <img src=\"{{ !i.thumb ? i.img : i.thumb }}\" class=\"ng-thumb\" (click)=\"openGallery(index)\" alt=\"Image {{ index + 1 }}\" />\r\n      </figure>\r\n    </div>\r\n    <div  tabindex=\"0\" class=\"ng-overlay\" [class.hide_lightbox]=\"opened == false\">\r\n      <div class=\"top-bar\">\r\n        <span class=\"info-text\">{{ currentImageIndex + 1 }}/{{ modalImages.length }}</span>      \r\n        <a class=\"close-popup\" (click)=\"closeGallery()\" (click)=\"toggleRestart()\">\r\n        </a>\r\n        <a *ngIf=\"!is_iPhone_or_iPod\" class=\"fullscreen-toogle\" [class.toggled]='fullscreen' (click)=\"fullScreen()\">\r\n        </a>\r\n        <a class=\"zoom-toogle\" [class.zoom]='zoom' (click)=\"toggleZoomed()\" *ngIf=\"!isMobile\">\r\n        </a>\r\n      </div>\r\n      <div class=\"ng-gallery-content\">\r\n        <!--<img *ngIf=\"!loading\" src=\"{{imgSrc}}\" (mousedown)=\"checkEvent($event)\" (mouseup)=\"setZoom($event)\" [class.zoom]='zoom' [class.smooth]='smooth' class=\"effect\" (swipeleft)=\"swipe($event, $event.type)\" (swiperight)=\"swipe($event, $event.type)\"/>-->\r\n        <img *ngIf=\"!loading\" src=\"{{imgSrc}}\" [class.smooth]='smooth' class=\"effect\" (swipeleft)=\"swipe($event, $event.type)\" (swiperight)=\"swipe($event, $event.type)\" (click)=\"toggleZoomed()\" [@zoomState]=\"zoomed\" [@restartState]=\"restart\"/>\r\n\r\n        <div class=\"uil-ring-css\" *ngIf=\"loading\">\r\n          <div></div>\r\n        </div>  \r\n        <a class=\"nav-left\" *ngIf=\"modalImages.length >1 && !isMobile\" (click)=\"prevImage()\" >\r\n          <span></span>\r\n        </a>\r\n        <a class=\"nav-right\" *ngIf=\"modalImages.length >1 && !isMobile\" (click)=\"nextImage()\">\r\n          <span></span>\r\n        </a>\r\n        \r\n      </div>\r\n    </div>\r\n\r\n    <div *ngIf=\"openModalWindow\">\r\n      <ImageModal [modalImages]=\"images\" [imagePointer]=\"imagePointer\" (cancelEvent)=\"cancelImageModel()\"></ImageModal>\r\n    </div>\r\n  `,\r\n  host: {\r\n    '(document:keyup)': 'keyboardControl($event)'\r\n  },\r\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ElementRef, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'modalImages': [{ type: Input, args: ['modalImages', ] },],\n'imagePointer': [{ type: Input, args: ['imagePointer', ] },],\n'fullscreen': [{ type: Input, args: ['fullscreen', ] },],\n'zoom': [{ type: Input, args: ['zoom', ] },],\n'smooth': [{ type: Input, args: ['smooth', ] },],\n'type': [{ type: Input, args: ['type', ] },],\n'cancelEvent': [{ type: Output, args: ['cancelEvent', ] },],\n};\n}\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}