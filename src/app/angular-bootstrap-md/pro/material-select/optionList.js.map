{"version":3,"sources":["../../../../src/app/typescripts/pro/material-select/optionList.ts"],"names":[],"mappings":"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","file":"optionList.js","sourceRoot":"","sourcesContent":["import {Option} from './option';\r\nimport {IOption} from './optionInterface';\r\nimport {Diacritics} from './diacritics';\r\n\r\nexport class OptionList {\r\n\r\n    private _options: Array<Option>;\r\n\r\n    /* Consider using these for performance improvement. */\r\n    // private _selection: Array<Option>;\r\n    // private _filtered: Array<Option>;\r\n    // private _value: Array<string>;\r\n\r\n    private _highlightedOption: Option = null;\r\n    private _hasShown: boolean;\r\n\r\n    constructor(options: Array<IOption>) {\r\n\r\n        if (typeof options === 'undefined' || options === null) {\r\n            options = [];\r\n        }\r\n\r\n        this._options = options.map((option) => {\r\n            let o: Option = new Option(option);\r\n            if (option.disabled) {\r\n                o.disabled = true;\r\n            }\r\n            if (option.group) {\r\n                o.disabled = true;\r\n                o.group = true;\r\n            }\r\n            return o;\r\n        });\r\n\r\n        this._hasShown = this._options.length > 0;\r\n        this.highlight();\r\n    }\r\n\r\n    /** Options. **/\r\n\r\n    get options(): Array<Option> {\r\n        return this._options;\r\n    }\r\n\r\n    getOptionsByValue(value: string): Array<Option> {\r\n        return this.options.filter((option) => {\r\n            return option.value === value;\r\n        });\r\n    }\r\n\r\n    /** Value. **/\r\n\r\n    get value(): Array<string> {\r\n        return this.selection.map((selectedOption) => {\r\n            return selectedOption.value;\r\n        });\r\n    }\r\n\r\n    set value(v: Array<string>) {\r\n        v = typeof v === 'undefined' || v === null ? [] : v;\r\n\r\n        this.options.forEach((option) => {\r\n            option.selected = v.indexOf(option.value) > -1;\r\n        });\r\n    }\r\n\r\n    /** Selection. **/\r\n\r\n    get selection(): Array<Option> {\r\n        return this.options.filter((option) => {\r\n            return option.selected;\r\n        });\r\n    }\r\n\r\n    select(option: Option, multiple: boolean) {\r\n        if (!multiple) {\r\n            this.clearSelection();\r\n        }\r\n        option.selected = true;          \r\n    }\r\n\r\n    deselect(option: Option) {\r\n        option.selected = false;\r\n    }\r\n\r\n    clearSelection() {\r\n        this.options.forEach((option) => {\r\n            option.selected = false;\r\n        });\r\n    }\r\n\r\n    /** Filter. **/\r\n\r\n    get filtered(): Array<Option> {\r\n        return this.options.filter((option) => {\r\n            return option.shown;\r\n        });\r\n    }\r\n\r\n    filter(term: string): boolean {\r\n        let anyShown: boolean = false;\r\n\r\n        if (term.trim() === '') {\r\n            this.resetFilter();\r\n            anyShown = this.options.length > 0;\r\n        }\r\n        else {\r\n            this.options.forEach((option) => {\r\n                let l: string = Diacritics.strip(option.label).toUpperCase();\r\n                let t: string = Diacritics.strip(term).toUpperCase();\r\n                option.shown = l.indexOf(t) > -1;\r\n\r\n                if (option.shown) {\r\n                    anyShown = true;\r\n                }\r\n            });\r\n\r\n        }\r\n\r\n        this.highlight();\r\n        this._hasShown = anyShown;\r\n\r\n        return anyShown;\r\n    }\r\n\r\n    private resetFilter() {\r\n        this.options.forEach((option) => {\r\n            option.shown = true;\r\n        });\r\n    }\r\n\r\n    /** Highlight. **/\r\n\r\n    get highlightedOption(): Option {\r\n        return this._highlightedOption;\r\n    }\r\n\r\n    highlight() {\r\n        let option: Option = this.hasShownSelected() ?\r\n            this.getFirstShownSelected() : this.getFirstShown();\r\n        this.highlightOption(option);\r\n    }\r\n\r\n    highlightOption(option: Option) {\r\n        this.clearHighlightedOption();\r\n\r\n        if (option !== null) {\r\n            option.highlighted = true;\r\n            this._highlightedOption = option;\r\n        }\r\n    }\r\n\r\n    highlightNextOption() {\r\n        let shownOptions = this.filtered;\r\n        let index = this.getHighlightedIndexFromList(shownOptions);\r\n\r\n        if (index > -1 && index < shownOptions.length - 1) {\r\n            this.highlightOption(shownOptions[index + 1]);\r\n        }\r\n    }\r\n\r\n    highlightPreviousOption() {\r\n        let shownOptions = this.filtered;\r\n        let index = this.getHighlightedIndexFromList(shownOptions);\r\n\r\n        if (index > 0) {\r\n            this.highlightOption(shownOptions[index - 1]);\r\n        }\r\n    }\r\n\r\n    private clearHighlightedOption() {\r\n        if (this.highlightedOption !== null) {\r\n            this.highlightedOption.highlighted = false;\r\n            this._highlightedOption = null;\r\n        }\r\n    }\r\n\r\n    private getHighlightedIndexFromList(options: Array<Option>) {\r\n        for (let i = 0; i < options.length; i++) {\r\n            if (options[i].highlighted) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n\r\n    getHighlightedIndex() {\r\n        return this.getHighlightedIndexFromList(this.filtered);\r\n    }\r\n\r\n    /** Util. **/\r\n\r\n    get hasShown(): boolean {\r\n        return this._hasShown;\r\n    }\r\n\r\n    hasSelected() {\r\n        return this.options.some((option) => {\r\n            return option.selected;\r\n        });\r\n    }\r\n\r\n    hasShownSelected() {\r\n        return this.options.some((option) => {\r\n            return option.shown && option.selected;\r\n        });\r\n    }\r\n\r\n    private getFirstShown(): Option {\r\n        for (let option of this.options) {\r\n            if (option.shown) {\r\n                return option;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    private getFirstShownSelected(): Option {\r\n        for (let option of this.options) {\r\n            if (option.shown && option.selected) {\r\n                return option;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    // v0 and v1 are assumed not to be undefined or null.\r\n    static equalValues(v0: Array<string>, v1: Array<string>): boolean {\r\n\r\n        if (v0.length !== v1.length) {\r\n            return false;\r\n        }\r\n\r\n        let a: Array<string> = v0.slice().sort();\r\n        let b: Array<string> = v1.slice().sort();\r\n\r\n        return a.every((v, i) => {\r\n            return v === b[i];\r\n        });\r\n    }\r\n}"]}