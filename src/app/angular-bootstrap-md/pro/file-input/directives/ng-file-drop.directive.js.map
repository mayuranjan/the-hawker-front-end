{"version":3,"sources":["../../../../../src/app/typescripts/pro/file-input/directives/ng-file-drop.directive.ts"],"names":[],"mappings":"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","file":"ng-file-drop.directive.js","sourceRoot":"","sourcesContent":["import { Directive, ElementRef, EventEmitter, Input, Output, OnInit, OnDestroy, PLATFORM_ID, Inject, HostListener } from '@angular/core';\r\nimport { isPlatformServer } from '@angular/common';\r\nimport { NgUploaderService, UploadOutput, UploadInput, UploadFile } from '../classes/ngx-uploader.class';\r\n\r\n\r\nexport class NgFileDropDirective implements OnInit, OnDestroy {\r\n   uploadInput: EventEmitter<UploadInput>;\r\n   uploadOutput: EventEmitter<UploadOutput>;\r\n\r\n  upload: NgUploaderService;\r\n  isServer: boolean = isPlatformServer(this.platform_id);\r\n  el: HTMLInputElement;\r\n\r\n  constructor( private platform_id: any, private elementRef: ElementRef) {\r\n    this.upload = new NgUploaderService();\r\n    this.uploadOutput = new EventEmitter<UploadOutput>();\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this.isServer) {\r\n      return;\r\n    }\r\n\r\n    this.el = this.elementRef.nativeElement;\r\n\r\n    this.upload.serviceEvents.subscribe((event: UploadOutput) => {\r\n      this.uploadOutput.emit(event);\r\n    });\r\n\r\n    if (this.uploadInput instanceof EventEmitter) {\r\n      this.upload.initInputEvents(this.uploadInput);\r\n    }\r\n\r\n    this.el.addEventListener('drop', this.stopEvent, false);\r\n    this.el.addEventListener('dragenter', this.stopEvent, false);\r\n    this.el.addEventListener('dragover', this.stopEvent, false);\r\n    this.el.addEventListener('dragover', this.stopEvent, false);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.isServer) {\r\n      return;\r\n    }\r\n\r\n    this.uploadInput.unsubscribe();\r\n  }\r\n\r\n  stopEvent = (e: Event) => {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n  }\r\n\r\n  \r\n  public onDrop(e: any) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n\r\n    const event: UploadOutput = { type: 'drop' };\r\n    this.uploadOutput.emit(event);\r\n    this.upload.handleFiles(e.dataTransfer.files);\r\n  }\r\n\r\n  \r\n  public onDragOver(e: Event) {\r\n    if (!e) {\r\n      return;\r\n    }\r\n\r\n    const event: UploadOutput = { type: 'dragOver' };\r\n    this.uploadOutput.emit(event);\r\n  }\r\n\r\n  \r\n  public onDragLeave(e: Event) {\r\n    if (!e) {\r\n      return;\r\n    }\r\n\r\n    const event: UploadOutput = { type: 'dragOut' };\r\n    this.uploadOutput.emit(event);\r\n  }\r\nstatic decorators: DecoratorInvocation[] = [\n{ type: Directive, args: [{\r\n  selector: '[ngFileDrop]'\r\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: undefined, decorators: [{ type: Inject, args: [PLATFORM_ID, ] }, ]},\n{type: ElementRef, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'uploadInput': [{ type: Input },],\n'uploadOutput': [{ type: Output },],\n'onDrop': [{ type: HostListener, args: ['drop', ['$event'], ] },],\n'onDragOver': [{ type: HostListener, args: ['dragover', ['$event'], ] },],\n'onDragLeave': [{ type: HostListener, args: ['dragleave', ['$event'], ] },],\n};\n}\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}